# Live Activities êµ¬í˜„ ê³„íš

## ğŸ¯ ëª©í‘œ
YouTube Premium ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ ì¤‘ì—ë„ ì‹¤ì‹œê°„ ìë§‰ì„ Dynamic Islandì™€ ì ê¸ˆ í™”ë©´ì— í‘œì‹œ

## ğŸ“± ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤

### ì£¼ìš” ì‚¬ìš© ì¼€ì´ìŠ¤
1. **YouTube Premium ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ** + Live Activities
   - ìš´ë™ ì¤‘ ì˜ì–´ ê°•ì˜ ë“£ê¸°
   - ì¶œí‡´ê·¼ ì¤‘ íŒŸìºìŠ¤íŠ¸ ë“£ê¸°
   - ì§‘ì•ˆì¼ í•˜ë©´ì„œ YouTube ë“£ê¸°

2. **ë‹¤ë¥¸ ì•± ì‚¬ìš© ì¤‘** + Live Activities
   - ë©”ì‹ ì €, SNS ì‚¬ìš©í•˜ë©´ì„œ
   - Dynamic Islandì—ì„œ ì‹¤ì‹œê°„ ìë§‰ í™•ì¸

3. **ì ê¸ˆ í™”ë©´** + Live Activities
   - í°ì„ ì£¼ë¨¸ë‹ˆì— ë„£ê³ 
   - í•„ìš”í•  ë•Œë§Œ ì ê¸ˆ í™”ë©´ì—ì„œ ìë§‰ í™•ì¸

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              React Native App                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ SubtitleService (ê¸°ì¡´)                    â”‚ â”‚
â”‚  â”‚ - ë§ˆì´í¬ë¡œ ì˜¤ë””ì˜¤ ìº¡ì²˜                    â”‚ â”‚
â”‚  â”‚ - WebSocketìœ¼ë¡œ ì„œë²„ ì „ì†¡                â”‚ â”‚
â”‚  â”‚ - ì‹¤ì‹œê°„ ìë§‰ ìˆ˜ì‹                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ LiveActivityManager (ì‹ ê·œ)                â”‚ â”‚
â”‚  â”‚ - React Native â†’ Native Bridge           â”‚ â”‚
â”‚  â”‚ - Activity ì‹œì‘/ì—…ë°ì´íŠ¸/ì¢…ë£Œ             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Native Bridge
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              iOS Native (Swift)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ AllSubActivityAttributes (ì‹ ê·œ)          â”‚  â”‚
â”‚  â”‚ - ActivityKit êµ¬ì¡°ì²´ ì •ì˜                 â”‚  â”‚
â”‚  â”‚ - ìë§‰ ë°ì´í„° ëª¨ë¸                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Widget Extension (ì‹ ê·œ)                   â”‚  â”‚
â”‚  â”‚ - Dynamic Island UI (SwiftUI)            â”‚  â”‚
â”‚  â”‚ - ì ê¸ˆ í™”ë©´ UI (SwiftUI)                 â”‚  â”‚
â”‚  â”‚ - ì‹¤ì‹œê°„ ìë§‰ í‘œì‹œ                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ êµ¬í˜„ ë‹¨ê³„

### Phase 1: ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ì„¤ì • (1ì¼)

#### 1.1 Expo Config Plugin ì¶”ê°€
```bash
npx expo install react-native-live-activities
```

#### 1.2 app.json ì„¤ì •
```json
{
  "expo": {
    "plugins": [
      [
        "react-native-live-activities",
        {
          "frequency": "live"
        }
      ]
    ],
    "ios": {
      "infoPlist": {
        "NSSupportsLiveActivities": true
      }
    }
  }
}
```

#### 1.3 ê°œë°œ ë¹Œë“œ ìƒì„±
```bash
npx expo prebuild --platform ios
npx expo run:ios
```

### Phase 2: Swift Widget Extension ê°œë°œ (2-3ì¼)

#### 2.1 AllSubActivityAttributes.swift ìƒì„±
```swift
import ActivityKit

struct AllSubActivityAttributes: ActivityAttributes {
    public struct ContentState: Codable, Hashable {
        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë˜ëŠ” ë°ì´í„°
        var originalSubtitle: String
        var translatedSubtitle: String
        var isRecording: Bool
        var timestamp: Date
    }
    
    // ê³ ì • ë°ì´í„°
    var appName: String
}
```

#### 2.2 Dynamic Island UI (SwiftUI)
```swift
struct AllSubLiveActivity: Widget {
    var body: some WidgetConfiguration {
        ActivityConfiguration(for: AllSubActivityAttributes.self) { context in
            // ì ê¸ˆ í™”ë©´ UI
            VStack(alignment: .leading, spacing: 8) {
                HStack {
                    Image(systemName: "captions.bubble.fill")
                        .foregroundColor(.purple)
                    Text("AllSub")
                        .font(.headline)
                    Spacer()
                    if context.state.isRecording {
                        HStack(spacing: 4) {
                            Circle()
                                .fill(Color.red)
                                .frame(width: 8, height: 8)
                            Text("LIVE")
                                .font(.caption)
                                .foregroundColor(.red)
                        }
                    }
                }
                
                // ì›ë³¸ ìë§‰
                Text(context.state.originalSubtitle)
                    .font(.body)
                    .foregroundColor(.primary)
                
                // ë²ˆì—­ ìë§‰
                Text(context.state.translatedSubtitle)
                    .font(.callout)
                    .foregroundColor(.secondary)
                    .italic()
            }
            .padding()
            .activityBackgroundTint(Color.purple.opacity(0.1))
        } dynamicIsland: { context in
            // Dynamic Island UI
            DynamicIsland {
                // Expanded
                DynamicIslandExpandedRegion(.leading) {
                    HStack {
                        Image(systemName: "captions.bubble.fill")
                            .foregroundColor(.purple)
                        Text("AllSub")
                            .font(.caption)
                    }
                }
                
                DynamicIslandExpandedRegion(.trailing) {
                    if context.state.isRecording {
                        HStack(spacing: 4) {
                            Circle()
                                .fill(Color.red)
                                .frame(width: 6, height: 6)
                            Text("LIVE")
                                .font(.caption2)
                        }
                    }
                }
                
                DynamicIslandExpandedRegion(.center) {
                    VStack(alignment: .leading, spacing: 4) {
                        Text(context.state.originalSubtitle)
                            .font(.caption)
                            .lineLimit(2)
                        
                        Text(context.state.translatedSubtitle)
                            .font(.caption2)
                            .foregroundColor(.secondary)
                            .lineLimit(2)
                    }
                }
            } compactLeading: {
                // Compact Leading (ì•„ì´ì½˜)
                Image(systemName: "captions.bubble.fill")
                    .foregroundColor(.purple)
            } compactTrailing: {
                // Compact Trailing (LIVE í‘œì‹œ)
                if context.state.isRecording {
                    Circle()
                        .fill(Color.red)
                        .frame(width: 6, height: 6)
                }
            } minimal: {
                // Minimal (ê°€ì¥ ì‘ì„ ë•Œ)
                Image(systemName: "captions.bubble.fill")
                    .foregroundColor(.purple)
            }
        }
    }
}
```

### Phase 3: React Native ë¸Œë¦¿ì§€ (1ì¼)

#### 3.1 LiveActivityManager ì„œë¹„ìŠ¤ ìƒì„±
```typescript
// src/services/liveActivityManager.ts
import LiveActivities from 'react-native-live-activities';

interface SubtitleActivityState {
  originalSubtitle: string;
  translatedSubtitle: string;
  isRecording: boolean;
  timestamp: Date;
}

class LiveActivityManager {
  private activityId: string | null = null;

  async start(): Promise<boolean> {
    try {
      // Live Activity ì‹œì‘
      this.activityId = await LiveActivities.startActivity({
        appName: 'AllSub',
        originalSubtitle: 'ìŒì„±ì„ ì¸ì‹í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
        translatedSubtitle: 'Listening...',
        isRecording: true,
        timestamp: new Date(),
      });
      
      console.log('Live Activity started:', this.activityId);
      return true;
    } catch (error) {
      console.error('Failed to start Live Activity:', error);
      return false;
    }
  }

  async update(subtitle: string, translation: string): Promise<void> {
    if (!this.activityId) {
      console.warn('Live Activity not started');
      return;
    }

    try {
      await LiveActivities.updateActivity(this.activityId, {
        originalSubtitle: subtitle,
        translatedSubtitle: translation,
        isRecording: true,
        timestamp: new Date(),
      });
    } catch (error) {
      console.error('Failed to update Live Activity:', error);
    }
  }

  async stop(): Promise<void> {
    if (!this.activityId) {
      return;
    }

    try {
      await LiveActivities.endActivity(this.activityId);
      console.log('Live Activity stopped');
      this.activityId = null;
    } catch (error) {
      console.error('Failed to stop Live Activity:', error);
    }
  }

  isActive(): boolean {
    return this.activityId !== null;
  }
}

export default new LiveActivityManager();
```

#### 3.2 SubtitleService í†µí•©
```typescript
// src/services/subtitleService.tsì— ì¶”ê°€
import LiveActivityManager from './liveActivityManager';

class SubtitleService {
  async start(...) {
    // ê¸°ì¡´ ì½”ë“œ...
    
    // Live Activity ì‹œì‘ (iOS 16.1+)
    if (Platform.OS === 'ios') {
      const liveActivityStarted = await LiveActivityManager.start();
      if (liveActivityStarted) {
        console.log('Live Activity started');
      }
    }
  }
  
  private setupWebSocketCallbacks() {
    WebSocketService.onSubtitle((data: SubtitleData) => {
      this.currentSubtitle = data.original;
      this.currentTranslation = data.translated;
      
      // Live Activity ì—…ë°ì´íŠ¸
      if (Platform.OS === 'ios' && LiveActivityManager.isActive()) {
        LiveActivityManager.update(data.original, data.translated);
      }
      
      this.onSubtitleUpdate?.(data.original, data.translated);
      this.updateState();
    });
  }
  
  async stop() {
    // ê¸°ì¡´ ì½”ë“œ...
    
    // Live Activity ì¢…ë£Œ
    if (Platform.OS === 'ios') {
      await LiveActivityManager.stop();
    }
  }
}
```

### Phase 4: UI ê°œì„  (0.5ì¼)

#### 4.1 ì„¤ì • í™”ë©´ì— Live Activities ì•ˆë‚´ ì¶”ê°€
```typescript
// HomeScreenì— ì•ˆë‚´ ì¶”ê°€
{Platform.OS === 'ios' && (
  <View style={styles.liveActivityNotice}>
    <Text style={styles.noticeText}>
      ğŸ’¡ YouTube Premium ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ ì‹œ{'\n'}
      Dynamic Islandì™€ ì ê¸ˆ í™”ë©´ì—ì„œ ìë§‰ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
    </Text>
  </View>
)}
```

### Phase 5: í…ŒìŠ¤íŠ¸ (1ì¼)

#### 5.1 í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
1. âœ… AllSubì—ì„œ ìë§‰ ON
2. âœ… Live Activity ì‹œì‘ í™•ì¸
3. âœ… YouTube Premium ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ
4. âœ… Dynamic Islandì—ì„œ ìë§‰ í™•ì¸ (iPhone 14 Pro+)
5. âœ… ì ê¸ˆ í™”ë©´ì—ì„œ ìë§‰ í™•ì¸
6. âœ… ë‹¤ë¥¸ ì•± ì‚¬ìš©í•˜ë©´ì„œ ìë§‰ í™•ì¸
7. âœ… ìë§‰ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í™•ì¸
8. âœ… AllSub ìë§‰ OFF â†’ Live Activity ì¢…ë£Œ í™•ì¸

## ğŸ“‹ ìš”êµ¬ì‚¬í•­

### 1. í•˜ë“œì›¨ì–´/ì†Œí”„íŠ¸ì›¨ì–´
- âœ… iOS 16.1 ì´ìƒ
- âœ… iPhone (Dynamic IslandëŠ” iPhone 14 Pro ì´ìƒ)
- âœ… Xcode 14 ì´ìƒ
- âœ… macOS Ventura ì´ìƒ

### 2. ê°œë°œ í™˜ê²½
- âœ… Expo SDK 51+ (Prebuild ì§€ì›)
- âœ… Swift 5.7+
- âœ… SwiftUI

### 3. ë¼ì´ë¸ŒëŸ¬ë¦¬
```bash
npm install react-native-live-activities
```

## âš ï¸ ì œí•œì‚¬í•­ ë° ê³ ë ¤ì‚¬í•­

### 1. ì˜¤ë””ì˜¤ ìº¡ì²˜ ì œí•œ
- iOSëŠ” ì‹œìŠ¤í…œ ì˜¤ë””ì˜¤ ì§ì ‘ ìº¡ì²˜ ë¶ˆê°€
- ìŠ¤í”¼ì»¤ì—ì„œ ë‚˜ì˜¤ëŠ” ì†Œë¦¬ë¥¼ ë§ˆì´í¬ë¡œ ë…¹ìŒ
- ì´ì–´í° ì‚¬ìš© ì‹œ ìë§‰ ì •í™•ë„ ì €í•˜ ê°€ëŠ¥

### 2. ë°°í„°ë¦¬ ì†Œëª¨
- ë°±ê·¸ë¼ìš´ë“œ ë§ˆì´í¬ ì‚¬ìš©
- ì§€ì†ì ì¸ ìŒì„± ì¸ì‹
- ë„¤íŠ¸ì›Œí¬ í†µì‹ 
â†’ ì‚¬ìš©ìì—ê²Œ ë°°í„°ë¦¬ ì†Œëª¨ ì•ˆë‚´ í•„ìš”

### 3. Live Activities ì œí•œ
- ìµœëŒ€ 8ì‹œê°„ ìë™ ì¢…ë£Œ
- 8ì‹œê°„ í›„ ìˆ˜ë™ìœ¼ë¡œ ì¬ì‹œì‘ í•„ìš”

### 4. UI ì œí•œ
- Live Activities UIëŠ” SwiftUIë¡œë§Œ ì‘ì„±
- Dynamic Island í¬ê¸°/ë ˆì´ì•„ì›ƒ ì œí•œì 
- ìƒí˜¸ì‘ìš© ì œí•œì  (ë²„íŠ¼ í´ë¦­ë§Œ ê°€ëŠ¥)

## ğŸ“Š ì˜ˆìƒ ì¼ì •

| ë‹¨ê³„ | ì‘ì—… | ì˜ˆìƒ ì‹œê°„ |
|-----|------|----------|
| Phase 1 | ë„¤ì´í‹°ë¸Œ ëª¨ë“ˆ ì„¤ì • | 1ì¼ |
| Phase 2 | Swift Widget Extension | 2-3ì¼ |
| Phase 3 | React Native ë¸Œë¦¿ì§€ | 1ì¼ |
| Phase 4 | UI ê°œì„  | 0.5ì¼ |
| Phase 5 | í…ŒìŠ¤íŠ¸ | 1ì¼ |
| **í•©ê³„** | | **5.5-6.5ì¼** |

## ğŸ¯ ì„±ê³µ ì§€í‘œ

1. âœ… YouTube Premium ë°±ê·¸ë¼ìš´ë“œ ì¬ìƒ ì¤‘ ìë§‰ í‘œì‹œ
2. âœ… Dynamic Islandì—ì„œ ì‹¤ì‹œê°„ ìë§‰ ì—…ë°ì´íŠ¸ (iPhone 14 Pro+)
3. âœ… ì ê¸ˆ í™”ë©´ì—ì„œ ìë§‰ í™•ì¸ ê°€ëŠ¥
4. âœ… ë‹¤ë¥¸ ì•± ì‚¬ìš© ì¤‘ì—ë„ ìë§‰ í‘œì‹œ
5. âœ… ìë§‰ ì§€ì—° ì‹œê°„ < 3ì´ˆ
6. âœ… ë°°í„°ë¦¬ ì†Œëª¨ < 10%/ì‹œê°„

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

êµ¬í˜„ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

1. **ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘** â†’ Phase 1ë¶€í„° ë‹¨ê³„ë³„ êµ¬í˜„
2. **ë‚˜ì¤‘ì— êµ¬í˜„** â†’ ë¬¸ì„œë¡œ ì €ì¥í•´ë‘ê³  ì¶”í›„ ì§„í–‰
3. **Android ë¨¼ì €** â†’ Android í”Œë¡œíŒ… ë²„íŠ¼ êµ¬í˜„ í›„ iOS Live Activities

ê²°ì •í•´ì£¼ì‹œë©´ ë°”ë¡œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤!

